# Galería Vórtice - App de Realidad Aumentada

Galería Vórtice // Montserrat Godinez Núñez // Parcial 02 // 08-07-2024

Esta es una app para la Galería Vórtice de realidad aumentada, dentro de la cual se puede acceder a un catálogo de obras con la información de las mismas, estas verlas con realidad aumentada dentro de tu espacio (Se requieren permiso para acceder a la cámara).

<aside>
⚠️ Esta app de momento solo está disponible como **apk**, por lo que funciona únicamente en dispositivos A**ndroid 8.0 ‘Oreo’ API level 26** o superior.

</aside>

---

# Índice

- [Contenido](https://www.notion.so/Contenido-65df2301835a4a71aa4f4f7729da5974?pvs=21)
- [Instalación](https://www.notion.so/Instalaci-n-a91454ba1e3d49efba9c8595edc8f917?pvs=21)
- [Menú Principal](https://www.notion.so/Men-Principal-b6a2fefaf2024ccd9a254c24a9048344?pvs=21)
- [Catálogo](https://www.notion.so/Cat-logo-ee59ef5f405f42ab9343dbb2b7dd683d?pvs=21)
- [Galería](https://www.notion.so/Galer-a-87bb9106565e4b78a592917d9bdfd599?pvs=21)
- [Ajustes](https://www.notion.so/Ajustes-7ab1b017d66a4a3192c9ce285bab0db3?pvs=21)
- [Salir](https://www.notion.so/Salir-f60bea4cd6d74b37968f9df384c64bf9?pvs=21)
- [Experiencia en Realidad Aumentada](https://www.notion.so/Experiencia-en-Realidad-Aumentada-887bdf27f6894253958ad4531ea4d53a?pvs=21)
- [[Native Gallery](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)](https://www.notion.so/Native-Gallery-8d068ee1f9fd4651bd39e8cf737e931b?pvs=21)
    - [Guardar las capturas de pantalla en el dispositivo.](https://www.notion.so/Guardar-las-capturas-de-pantalla-en-el-dispositivo-95f36c597fd64259a65e845aed4517ac?pvs=21)
- [Sistema de Sonido](https://www.notion.so/Sistema-de-Sonido-f4f6183c75464146b93f200a7c2bc6f9?pvs=21)
    - [Lista de Música y Efectos de Sonido](https://www.notion.so/Lista-de-M-sica-y-Efectos-de-Sonido-a341b01984c043cbace1b4451eccf233?pvs=21)
    - [Reproducir la música o los efectos de sonido desde cualquier parte del código](https://www.notion.so/Reproducir-la-m-sica-o-los-efectos-de-sonido-desde-cualquier-parte-del-c-digo-7840fa425ccd471092e2bc2e88afac4a?pvs=21)
    - [Ajustes del Sistema de Sonido](https://www.notion.so/Ajustes-del-Sistema-de-Sonido-b6e5db3f4be146ce8f6366c40fc64661?pvs=21)
- [Recomendaciones](https://www.notion.so/Recomendaciones-ca02208ca46c43a98dd3d0828404f2ea?pvs=21)
    - [Usa traductor para los errores si no sabes inglés](https://www.notion.so/Usa-traductor-para-los-errores-si-no-sabes-ingl-s-15cdfa2452d64da1a9576f066f6f013b?pvs=21)
    - [No modifiques los scripts!](https://www.notion.so/No-modifiques-los-scripts-8f8b04a9fc864db29afbf1369c237f1c?pvs=21)
- [Github](https://www.notion.so/Github-13a4c709d3984174bc9187a6d2009668?pvs=21)
- [Contacto](https://www.notion.so/Contacto-55cac7f021774f4ea3907ef5848fa1f4?pvs=21)

---

# Contenido

- Catálogo con las obras disponibles dentro de la app, donde se muestra la información de la obra mostrada.
- Experiencia de realidad aumentada donde la obra seleccionada en el catálogo se muestra con realidad aumentada dentro del espacio físico y se da la opción de tomar capturas de pantalla.
- Galería local donde se guardan las capturas de pantalla tomadas dentro de la aplicación, mismas que pueden ser guardadas en el dispositivo.
    - Uso de la herramienta **Native Gallery,** misma que puedes encontrar en:
    
    [https://github.com/yasirkula/UnityNativeGallery.git](https://github.com/yasirkula/UnityNativeGallery.git)
    
    <aside>
    ⚠️ En caso de que el acceso directo no funcione, copia y pega el siguiente link en un buscador: [https://github.com/yasirkula/UnityNativeGallery.git](https://github.com/yasirkula/UnityNativeGallery.git)
    
    </aside>
    
- Ajustes de música y efectos de sonido.
    
    Uso de un Audio Manager**.**
    
- Botón para cerrar la aplicación.

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# Instalación

- Descarga en tu dispositivo **Android** el apk “GaleríaVórticeAR.apk”, el cual lo encontrarás en el repositorio GaleriaVorticeAR.

[https://github.com/MGN-MK/GaleriaVorticeAR.git](https://github.com/MGN-MK/GaleriaVorticeAR.git)

<aside>
⚠️ En caso de que el acceso directo no funcione, copia y pega el siguiente link en un buscador: [https://github.com/MGN-MK/GaleriaVorticeAR.git](https://github.com/MGN-MK/GaleriaVorticeAR.git)

</aside>

- Cuando abrimos un archivo .apk, será la aplicación desde la que lo hagamos la que **nos advertirá que está bloqueado el proceso**.
- Asegúrate de que tu aplicación  desde la que abriste la app tenga permiso de **Instalar app desconocidas** (el nombre puede variar dependiendo del dispositivo). En caso de no estar activada o no saber dónde revisarlo, sigue los siguientes pasos:
    
    <aside>
    ⚠️ El proceso puede variar dependiendo de la marca, pero el proceso es similar entre dispositivos Android. Si tienes problemas para encontrar la opción, te recomiendo  buscar en internet “Cómo activar o desactivar el permiso de instalar desde fuentes desconocidas en” o “Cómo instalar un apk en”, para ambos agregando la marca de tu dispositivo.
    
    </aside>
    
    - Abriendo el apk. **Con este método solo podrás conceder el permiso, para removerlo ve a [configuración.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)**
        - Abre el apk desde el explorador de archivos o del apartado de descargas de tu navegador de internet.
        - En la zona inferior de la pantalla verás un aviso indicando que **"no se pueden instalar aplicaciones de orígenes desconocidos"** y da la opción de entrar en los "Ajustes".
        - Dentro de la ajustes busca el apartado **"Instalar aplicaciones desconocidas"** y activa la casilla.
    - Desde configuración. **Con este método puedes conceder y remover este tipo de permisos.**
        - Abre los **"Ajustes"** del sistema o el apartado de **"Configuración".**
        - Entre todas las opciones busca **"Aplicaciones"**, un campo que en algunas marcas puede variar ligeramente.
        - Una vez dentro toca en **"Ver todas las aplicaciones"** y selecciona aquella cuyos permisos quieres cambiar.
        - Dentro de la aplicación busca el apartado **"Instalar aplicaciones desconocidas"** y activa o desactiva la casilla.
- Abre el apk si no la haz abierto, y selecciona instalar. El proceso puede demorar unos minutos y es posible que tu dispositivo te pida confirmaciones para instalar y/o escaneo de la app antes de instalar. La app que encuentras **en el link de descarga de este documento** está libre de virus y malware.
- Una vez instalada la aplicación tal vez quieras remover el permiso para instalar desde fuentes desconocidas, puedes hacerlo desde [configuración](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21).
    
    <aside>
    ⚠️ Es altamente recomendable activar este permiso únicamente en el momento en que se instala una aplicación, y removerlo después de instalarla, esto para evitar exponer a tu dispositivo a malware por aplicaciones no seguras.
    
    </aside>
    

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# Menú Principal

Al abrir la aplicación encontrarás el menú principal donde podrás acceder al resto de interfaces.

1. [Catálogo](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21). En este menú podrás navegar entre las obras disponibles y su información correspondiente.
2. [Galería](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21). En este menú encontrarás las capturas de pantalla que tomaste desde la propia aplicación.
3. [Ajustes](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21). En este menú podrás ajustar la música y los efectos de sonido.
4. [Salir](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21). Con este botón cerrarás la aplicación.

---

# Catálogo

En este menú podrás navegar entre las obras disponibles y su información correspondiente. Dentro de este menú encontrarás:

1. [Regreso al Menú Principal.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)
2. Título de la obra.
3. Año de la obra.
4. Vista previa de la obra.
5. Botones a la izquierda y derecha para cambiar entre las obras disponibles en el catálogo de la app.
6. Nombre del artista.
7. Técnica utilizada en la obra.
8. Tamaño de la obra en cm. (Alto x Ancho).
9. [Experiencia en Realidad Aumentada.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)

---

# Galería

En este menú encontrarás las capturas de pantalla que tomaste desde la propia aplicación. Dentro de sus opciones encontrarás:

1. [Regreso al Menú Principal.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)
2. Muestra cuadriculada de las últimas 24 capturas que tomaste. Puedes hacer clic en cada captura para abrir la previsualización.

Dentro de la previsualización podrás:

1. Ver en grande la captura de pantalla correspondiente.
2. Botones a la izquierda y derecha para cambiar entre las capturas de pantalla dentro de la galería de la app.
3. Eliminar la captura de la galería de la aplicación, en automático te mostrará la siguiente captura o, en caso de que ya no haya capturas dentro de la galería, cierra la previsualización.
4. Cerrar la previsualización.
5. Guardar la captura de pantalla en la galería de tu dispositivo. Esta se guarda en una carpeta llamada “Galería Vórtice”, que es automáticamente creada en el caso de que no exista.

---

# Ajustes

En este menú podrás ajustar la música y los efectos de sonido. Aquí encontrás:

1. [Regreso al Menú Principal.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)
2. Activar y desactivar la música o los efectos de sonido.
3. Ajustar el volumen de la música o los efectos de sonido con un slider, la forma en que este lo ajusta es de forma exponencial.

---

# Salir

Al pulsar este botón se activará una ventana de confirmación para cerrar la aplicación, si se pulsa “Sí”, la aplicación se cerrará; si se pulsa “No”, serás devuelto al [menú principal.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)

---

# Experiencia en Realidad Aumentada

Aquí podrás ver la obra que seleccionaste en el catálogo dentro de tu entorno con realidad aumentada. Puedes ajustar la obra en tu espacio al:

1. Arrastrar con un dedo por la pantalla para moverla (esta opción puede fallar en algunos dispositivos).
2. Arrastrar con dos dedos para girar la obra en un eje.
3. Pellizcar con dos dedos para escalar la obra. (La obra se ajusta automáticamente al tamaño mostrado en el catálogo, sin embargo, es posible que por problemas de reconocimiento de espacio se muestre con un tamaño superior o inferior).

Además, dentro de este menú cuentas con las siguientes opciones:

1. [Regreso al Menú Principal.](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)
2. Cambiar el tipo de reconocimiento de espacio.
3. Activar o desactivar la realidad aumentada.
4. Tomar una captura de pantalla.
    1. Esta muestra la imagen de la obra en tu entorno y la información de la misma.
    2. La captura se guarda en la [galería de la aplicación](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21), donde podrás verla después, también podrás guardarla en tu dispositivo o eliminarla de la aplicación.

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# [Native Gallery](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21)

## Guardar las capturas de pantalla en el dispositivo.

Dentro del script “CS_GalleryManager” (Galeria Vortice > Scripts > Managers > CS_GalleryManager) se encuentra la función que guarda la imagen, con la que se reproduce el efecto de sonido y se usa [Native Gallery](https://www.notion.so/Galer-a-V-rtice-App-de-Realidad-Aumentada-21771a007c994be886a5254db0c9ee02?pvs=21) para guardar la imagen.

Esta función requiere:

1. Una textura 2D, que es la imagen que se guardará.
2. El nombre del álbum.
3. El nombre con el que se va a guardar la imagen con la extensión del tipo de archivo.
    1. En este caso se le pone el prefijo "GVScreenshot_", se le agrega la información del momento en que se guarda la imagen (esto con el fin de evitar que se sobre escriban las imágenes), y se le asigna la extensión .png. Por lo que la imagen resultante queda con un nombre de archivo similar a "GVScreenshot_2024-07-12-05-45-48.png"

```csharp
//Saves the screenshot in the device
public void SaveScreenshot()
{
    //Play the sfx for save
    CS_AudioManager.instance.PlaySFX("Save");

    //Actually saves the image
    NativeGallery.SaveImageToGallery(gallery[index].image.texture, albumName, "GVScreenshot_" + DateTime.Now.ToString("yyyy-MM-dd-HH-mm-ss") + ".png");
}
```

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# Sistema de Sonido

## Lista de Música y Efectos de Sonido

Dentro del script “CS_Sound” (Galeria Vortice > Scripts > BaseClass > CS_Sound) se declara una clase para guardar los sonidos con el clip y un nombre para el mismo.

Dentro del script “CS_AudioManager” (Galeria Vortice > Scripts > Managers > CS_AudioManager), se declara dos listas públicas de CS_Sounds, donde se asignan los sonidos y sus nombres para identificarlos, una lista para música y otra para efectos de sonido.

```csharp
public CS_Sound[] musicSounds, sfxSounds;
```

## Reproducir la música o los efectos de sonido desde cualquier parte del código

Dentro del script “CS_AudioManager” (Galeria Vortice > Scripts > Managers > CS_AudioManager), se encuentran las funciones que reproducen la música y los efectos de sonido, estas tienen una estructura similar a la siguiente:

```csharp
    //To use any play in the script add CS_AudioManager.instance.PlayMusic("Name");
    //To stop in the script add CS_AudioManager.instance.musicSource.Stop();
    public void PlayMusic(string name)
    {
        CS_Sound s = Array.Find(musicSounds, x => x.name == name);

        if(s == null)
        {
            Debug.Log("Music " + name + " not found!");
        }
        else
        {
            musicSource.clip = s.clip;
            musicSource.Play();
        }
    }
```

Con esto es posible reproducir los sonidos desde cualquier script sin referencias adicionales y utilizando únicamente el nombre con el que se identifica dicho sonido dentro de las listas del Audio Manager.

## Ajustes del Sistema de Sonido

Dentro del script “CS_AudioManager” (Galeria Vortice > Scripts > Managers > CS_AudioManager), se encuentran las funciones que ajustan el volumen y si están activos la música y los efectos de sonido, estas tienen una estructura similar a la siguiente:

```csharp
//Mutes and unmutes the music source
    public void ToggleMusic()
    {
        musicSource.mute = !musicSource.mute;
    }
    
//Changes the volume of the music
    public void MusicVolume(float volume)
    {
        musicSource.volume = volume * volume;
    }
```

Estas funciones se mandan a llamar desde los ajustes de la aplicación. El volumen se ajusta con “volume * volume” para que este esté de forma exponencial permitiendo una mejor percepción del usuario a los cambios.

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# Recomendaciones

## Usa traductor para los errores si no sabes inglés

Los códigos y mensajes de error se encuentran en inglés debido a que es el lenguaje universal para estos. Sin embargo, el contenido es fácil de entender incluso traduciéndolo con algún traductor en línea, úsalo si así lo requieres.

## No modifiques los scripts!

Esto debido a que estos están relacionados entre sí. Solo modifícalos para integrar el sistema a los sistemas que ya tienes en el proyecto (Sistemas de progresión, de movimiento, de inventario, etc.).

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

# Github

Puedes encontrar el repositorio de GitHub **para consultas** en el siguiente link:

[https://github.com/MGN-MK/GaleriaVorticeAR.git](https://github.com/MGN-MK/GaleriaVorticeAR.git)

<aside>
⚠️ En caso de que el acceso directo no funcione, copia y pega el siguiente link en un buscador: [https://github.com/MGN-MK/GaleriaVorticeAR.git](https://github.com/MGN-MK/GaleriaVorticeAR.git)

</aside>

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21) 

---

# Contacto

Dudas, comentarios y sugerencias las puedes enviar al siguiente correo con el asunto “GitHub Galería Vórtice AR”:

MontseG700@gmail.com

[Índice](https://www.notion.so/ndice-fc3fc20ae7d041faab8a33faeba9886a?pvs=21)